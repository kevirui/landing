---
import CycleNode from '@components/Model/CycleNode.astro';

interface Node {
  value: string;
  label: string;
  variant?: 'dark' | 'light' | 'gray';
  offset?: 'none' | 'down';
}

interface Props {
  title: string;
  description: string;
  nodes: Node[];
}

const { title, description, nodes } = Astro.props;
---

<div class="bg-[#1A5F38] rounded-2xl p-8 relative overflow-hidden">
  <h3 class="text-2xl font-bold mb-8">{title}</h3>
  <p class="text-sm mb-12 max-w-2xl">{description}</p>

  <div
    class="relative py-12 flex flex-col md:flex-row items-center justify-between gap-8 md:gap-0"
  >
    {/* SVG curved path with arrows */}
    <div class="absolute inset-0 pointer-events-none hidden md:block">
      <svg
        width="100%"
        height="100%"
        viewBox="0 0 800 200"
        preserveAspectRatio="none"
      >
        <path
          d="M 50 100 Q 250 100, 250 150 T 450 150 T 650 100"
          fill="none"
          stroke="black"
          stroke-width="2"
          stroke-dasharray="10,10"
          class="opacity-50"></path>
        {/* Arrows */}
        <polygon
          points="150,115 130,125 130,105"
          fill="#4B9C8E"
          transform="rotate(20 140 115)"></polygon>
        <polygon
          points="350,135 330,145 330,125"
          fill="#4B9C8E"
          transform="rotate(-20 340 135)"></polygon>
        <polygon
          points="550,115 530,125 530,105"
          fill="#4B9C8E"
          transform="rotate(20 540 115)"></polygon>
      </svg>
    </div>

    {/* Nodes */}
    {
      nodes.map(node => (
        <CycleNode
          value={node.value}
          label={node.label}
          variant={node.variant}
          offset={node.offset}
        />
      ))
    }
  </div>
</div>
