---
import CycleNode from '@components/Model/CycleNode.astro';

interface Node {
  value: string;
  label: string;
  variant?: 'dark' | 'light' | 'gray';
  offset?: 'none' | 'down';
}

interface Props {
  title: string;
  description: string;
  nodes: Node[];
}

const { title, description, nodes } = Astro.props;
---

<div class="bg-[#1A5F38] rounded-2xl p-8 relative overflow-hidden">
  <h3 class="text-2xl font-bold mb-8">{title}</h3>
  <p class="text-sm mb-12 max-w-2xl">{description}</p>

  <div
    class="relative py-12 flex flex-col md:flex-row items-center justify-between gap-8 md:gap-0"
  >
    <div class="absolute inset-0 pointer-events-none hidden md:block">
      <svg
        width="100%"
        height="100%"
        viewBox="0 0 1000 300"
        preserveAspectRatio="none"
      >
        <path
          d="M 60 150 C 100 80, 140 80, 180 150 C 220 220, 260 220, 300 150 C 340 80, 380 80, 420 150 C 460 220, 500 220, 540 150 C 580 80, 620 80, 660 150 C 700 220, 740 220, 780 150 C 820 80, 860 80, 900 150"
          fill="none"
          stroke="black"
          stroke-width="2.5"
          stroke-dasharray="12,8"
          class="opacity-50"></path>
        <polygon
          points="150,120 135,128 135,112"
          fill="#4B9C8E"
          transform="rotate(-25 142 120)"></polygon>
        <polygon
          points="350,180 335,188 335,172"
          fill="#4B9C8E"
          transform="rotate(25 342 180)"></polygon>
        <polygon
          points="550,120 535,128 535,112"
          fill="#4B9C8E"
          transform="rotate(-25 542 120)"></polygon>
        <polygon
          points="750,180 735,188 735,172"
          fill="#4B9C8E"
          transform="rotate(25 742 180)"></polygon>
      </svg>
    </div>

    {
      nodes.map(node => (
        <CycleNode
          value={node.value}
          label={node.label}
          variant={node.variant}
          offset={node.offset}
        />
      ))
    }
  </div>
</div>
